Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id A29D9E320A
	for <lists+linux-kernel@lfdr.de>; Thu, 24 Oct 2019 14:15:11 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2439638AbfJXMPJ (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Thu, 24 Oct 2019 08:15:09 -0400
Received: from mx2.suse.de ([195.135.220.15]:40132 "EHLO mx1.suse.de"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S2439626AbfJXMPJ (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Thu, 24 Oct 2019 08:15:09 -0400
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
        by mx1.suse.de (Postfix) with ESMTP id CC540AD79;
        Thu, 24 Oct 2019 12:15:07 +0000 (UTC)
Date:   Thu, 24 Oct 2019 14:15:07 +0200
Message-ID: <s5hzhhqwd9w.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     Mark Brown <broonie@kernel.org>
Cc:     Jerome Brunet <jbrunet@baylibre.com>, alsa-devel@alsa-project.org,
        Russell King <rmk+kernel@armlinux.org.uk>,
        Liam Girdwood <lgirdwood@gmail.com>,
        linux-kernel@vger.kernel.org
Subject: Re: [alsa-devel] [PATCH 0/2] ASoC: hdmi-codec: fix locking issue
In-Reply-To: <20191024113444.GF5207@sirena.co.uk>
References: <20191023161203.28955-1-jbrunet@baylibre.com>
        <s5ha79rph1j.wl-tiwai@suse.de>
        <1jv9sfcpr8.fsf@starbuckisacylon.baylibre.com>
        <20191024113444.GF5207@sirena.co.uk>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Thu, 24 Oct 2019 13:34:44 +0200,
Mark Brown wrote:
> 
> On Wed, Oct 23, 2019 at 07:53:31PM +0200, Jerome Brunet wrote:
> 
> > With the revert, we are back to the bit ops. Even if it works, Mark's
> > original comment on the bit ops still stands I think. This is why I'm
> > proposing patch 2 but I don't really mind if it is applied or not.
> 
> Yeah, it's not *required* but the atomic operations have lots of spiky
> edges so a simpler locking construct would have less chance of running
> into trouble later when someone's updating the code.

If that's the reason, it should be mentioned specifically in the
commit.  That is, it's not about functionality or efficiency but just
about the code readability.


thanks,

Takashi
