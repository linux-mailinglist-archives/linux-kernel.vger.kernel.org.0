Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 0EFFD12E224
	for <lists+linux-kernel@lfdr.de>; Thu,  2 Jan 2020 05:03:24 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727794AbgABEDD (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Wed, 1 Jan 2020 23:03:03 -0500
Received: from mailgw01.mediatek.com ([210.61.82.183]:22585 "EHLO
        mailgw01.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1727618AbgABEC1 (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Wed, 1 Jan 2020 23:02:27 -0500
X-UUID: 723220f3206d428eb120f0d461e91eff-20200102
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=KatR3ycJbW2j9tID6AqHq4Ul5zoaWs75GrgssCk4PYE=;
        b=Uh3WHLvBxDeK8tc1evVKEQlPktE85eHJpr9vuS9oUIqiyWMGbIyz6RvtykSOoEFFbbkzhaxhf5o8bm0mDpdsyNsfZtZgPfCnbLL83ZW+c/Ox7wKm4RnH4TOknxYtr+gofzWyCz6KlneH4JduprbQMS6qlfSeQY1SUmUrjTe8+sg=;
X-UUID: 723220f3206d428eb120f0d461e91eff-20200102
Received: from mtkexhb02.mediatek.inc [(172.21.101.103)] by mailgw01.mediatek.com
        (envelope-from <yongqiang.niu@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
        with ESMTP id 15904602; Thu, 02 Jan 2020 12:02:18 +0800
Received: from mtkcas07.mediatek.inc (172.21.101.84) by
 mtkmbs05n2.mediatek.inc (172.21.101.140) with Microsoft SMTP Server (TLS) id
 15.0.1395.4; Thu, 2 Jan 2020 12:01:46 +0800
Received: from localhost.localdomain (10.17.3.153) by mtkcas07.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1395.4 via Frontend
 Transport; Thu, 2 Jan 2020 12:01:36 +0800
From:   Yongqiang Niu <yongqiang.niu@mediatek.com>
To:     CK Hu <ck.hu@mediatek.com>, Philipp Zabel <p.zabel@pengutronix.de>,
        Rob Herring <robh+dt@kernel.org>,
        Matthias Brugger <matthias.bgg@gmail.com>
CC:     David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>,
        Mark Rutland <mark.rutland@arm.com>,
        <dri-devel@lists.freedesktop.org>, <devicetree@vger.kernel.org>,
        <linux-kernel@vger.kernel.org>,
        <linux-arm-kernel@lists.infradead.org>,
        <linux-mediatek@lists.infradead.org>,
        Yongqiang Niu <yongqiang.niu@mediatek.com>
Subject: [PATCH v6, 04/14] drm/mediatek: add mmsys private data for ddp path config
Date:   Thu, 2 Jan 2020 12:00:14 +0800
Message-ID: <1577937624-14313-5-git-send-email-yongqiang.niu@mediatek.com>
X-Mailer: git-send-email 1.8.1.1.dirty
In-Reply-To: <1577937624-14313-1-git-send-email-yongqiang.niu@mediatek.com>
References: <1577937624-14313-1-git-send-email-yongqiang.niu@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-MTK:  N
Content-Transfer-Encoding: base64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

VGhpcyBwYXRjaCBhZGQgbW1zeXMgcHJpdmF0ZSBkYXRhIGZvciBkZHAgcGF0aCBjb25maWcNCmFs
bCB0aGVzZSByZWdpc3RlciBvZmZzZXQgYW5kIHZhbHVlIHdpbGwgYmUgZGlmZmVyZW50IGluIGZ1
dHVyZSBTT0MNCmFkZCB0aGVzZSBkZWZpbmUgaW50byBtbXN5cyBwcml2YXRlIGRhdGENCgl1MzIg
b3ZsMF9tb3V0X2VuOw0KCXUzMiByZG1hMV9zb3V0X3NlbF9pbjsNCgl1MzIgcmRtYTFfc291dF9k
c2kwOw0KCXUzMiBkcGkwX3NlbF9pbjsNCgl1MzIgZHBpMF9zZWxfaW5fcmRtYTE7DQoJdTMyIGRz
aTBfc2VsX2luOw0KCXUzMiBkc2kwX3NlbF9pbl9yZG1hMTsNCg0KU2lnbmVkLW9mZi1ieTogWW9u
Z3FpYW5nIE5pdSA8eW9uZ3FpYW5nLm5pdUBtZWRpYXRlay5jb20+DQotLS0NCiBkcml2ZXJzL2dw
dS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9jcnRjLmMgfCAgNCArKysNCiBkcml2ZXJzL2dwdS9kcm0v
bWVkaWF0ZWsvbXRrX2RybV9kZHAuYyAgfCA2MyArKysrKysrKysrKysrKysrKysrKysrKystLS0t
LS0tLS0NCiBkcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kZHAuaCAgfCAgNiArKysr
DQogZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fZHJ2LmMgIHwgIDMgKysNCiBkcml2
ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kcnYuaCAgfCAgMyArKw0KIDUgZmlsZXMgY2hh
bmdlZCwgNjMgaW5zZXJ0aW9ucygrKSwgMTYgZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQgYS9k
cml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9jcnRjLmMgYi9kcml2ZXJzL2dwdS9kcm0v
bWVkaWF0ZWsvbXRrX2RybV9jcnRjLmMNCmluZGV4IGU0N2NmODQuLjlhYWNiY2YgMTAwNjQ0DQot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9jcnRjLmMNCisrKyBiL2RyaXZl
cnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2NydGMuYw0KQEAgLTQ0LDYgKzQ0LDcgQEAgc3Ry
dWN0IG10a19kcm1fY3J0YyB7DQogCWJvb2wJCQkJcGVuZGluZ19wbGFuZXM7DQogDQogCXN0cnVj
dCByZWdtYXAJCQkqY29uZmlnX3JlZ3M7DQorCWNvbnN0IHN0cnVjdCBtdGtfbW1zeXNfcmVnX2Rh
dGEgKm1tc3lzX3JlZ19kYXRhOw0KIAlzdHJ1Y3QgbXRrX2Rpc3BfbXV0ZXgJCSptdXRleDsNCiAJ
dW5zaWduZWQgaW50CQkJZGRwX2NvbXBfbnI7DQogCXN0cnVjdCBtdGtfZGRwX2NvbXAJCSoqZGRw
X2NvbXA7DQpAQCAtMjgzLDYgKzI4NCw3IEBAIHN0YXRpYyBpbnQgbXRrX2NydGNfZGRwX2h3X2lu
aXQoc3RydWN0IG10a19kcm1fY3J0YyAqbXRrX2NydGMpDQogCURSTV9ERUJVR19EUklWRVIoIm1l
ZGlhdGVrX2RkcF9kZHBfcGF0aF9zZXR1cFxuIik7DQogCWZvciAoaSA9IDA7IGkgPCBtdGtfY3J0
Yy0+ZGRwX2NvbXBfbnIgLSAxOyBpKyspIHsNCiAJCW10a19kZHBfYWRkX2NvbXBfdG9fcGF0aCht
dGtfY3J0Yy0+Y29uZmlnX3JlZ3MsDQorCQkJCQkgbXRrX2NydGMtPm1tc3lzX3JlZ19kYXRhLA0K
IAkJCQkJIG10a19jcnRjLT5kZHBfY29tcFtpXS0+aWQsDQogCQkJCQkgbXRrX2NydGMtPmRkcF9j
b21wW2kgKyAxXS0+aWQpOw0KIAkJbXRrX2Rpc3BfbXV0ZXhfYWRkX2NvbXAobXRrX2NydGMtPm11
dGV4LA0KQEAgLTM0MCw2ICszNDIsNyBAQCBzdGF0aWMgdm9pZCBtdGtfY3J0Y19kZHBfaHdfZmlu
aShzdHJ1Y3QgbXRrX2RybV9jcnRjICptdGtfY3J0YykNCiAJbXRrX2Rpc3BfbXV0ZXhfZGlzYWJs
ZShtdGtfY3J0Yy0+bXV0ZXgpOw0KIAlmb3IgKGkgPSAwOyBpIDwgbXRrX2NydGMtPmRkcF9jb21w
X25yIC0gMTsgaSsrKSB7DQogCQltdGtfZGRwX3JlbW92ZV9jb21wX2Zyb21fcGF0aChtdGtfY3J0
Yy0+Y29uZmlnX3JlZ3MsDQorCQkJCQkgICAgICBtdGtfY3J0Yy0+bW1zeXNfcmVnX2RhdGEsDQog
CQkJCQkgICAgICBtdGtfY3J0Yy0+ZGRwX2NvbXBbaV0tPmlkLA0KIAkJCQkJICAgICAgbXRrX2Ny
dGMtPmRkcF9jb21wW2kgKyAxXS0+aWQpOw0KIAkJbXRrX2Rpc3BfbXV0ZXhfcmVtb3ZlX2NvbXAo
bXRrX2NydGMtPm11dGV4LA0KQEAgLTY0OSw2ICs2NTIsNyBAQCBpbnQgbXRrX2RybV9jcnRjX2Ny
ZWF0ZShzdHJ1Y3QgZHJtX2RldmljZSAqZHJtX2RldiwNCiAJCXJldHVybiAtRU5PTUVNOw0KIA0K
IAltdGtfY3J0Yy0+Y29uZmlnX3JlZ3MgPSBwcml2LT5jb25maWdfcmVnczsNCisJbXRrX2NydGMt
Pm1tc3lzX3JlZ19kYXRhID0gcHJpdi0+ZGF0YS0+cmVnX2RhdGE7DQogCW10a19jcnRjLT5kZHBf
Y29tcF9uciA9IHBhdGhfbGVuOw0KIAltdGtfY3J0Yy0+ZGRwX2NvbXAgPSBkZXZtX2ttYWxsb2Nf
YXJyYXkoZGV2LCBtdGtfY3J0Yy0+ZGRwX2NvbXBfbnIsDQogCQkJCQkJc2l6ZW9mKCptdGtfY3J0
Yy0+ZGRwX2NvbXApLA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtf
ZHJtX2RkcC5jIGIvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fZGRwLmMNCmluZGV4
IGY5OWY4OWExLi5lYTBjZTMyIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVr
L210a19kcm1fZGRwLmMNCisrKyBiL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2Rk
cC5jDQpAQCAtMTY4LDYgKzE2OCwxNiBAQCBzdHJ1Y3QgbXRrX2RkcCB7DQogCWNvbnN0IHN0cnVj
dCBtdGtfZGRwX2RhdGEJKmRhdGE7DQogfTsNCiANCitzdHJ1Y3QgbXRrX21tc3lzX3JlZ19kYXRh
IHsNCisJdTMyIG92bDBfbW91dF9lbjsNCisJdTMyIHJkbWExX3NvdXRfc2VsX2luOw0KKwl1MzIg
cmRtYTFfc291dF9kcGkwOw0KKwl1MzIgZHBpMF9zZWxfaW47DQorCXUzMiBkcGkwX3NlbF9pbl9y
ZG1hMTsNCisJdTMyIGRzaTBfc2VsX2luOw0KKwl1MzIgZHNpMF9zZWxfaW5fcmRtYTE7DQorfTsN
CisNCiBzdGF0aWMgY29uc3QgdW5zaWduZWQgaW50IG10MjcwMV9tdXRleF9tb2RbRERQX0NPTVBP
TkVOVF9JRF9NQVhdID0gew0KIAlbRERQX0NPTVBPTkVOVF9CTFNdID0gTVQyNzAxX01VVEVYX01P
RF9ESVNQX0JMUywNCiAJW0REUF9DT01QT05FTlRfQ09MT1IwXSA9IE1UMjcwMV9NVVRFWF9NT0Rf
RElTUF9DT0xPUiwNCkBAIC0yNDYsMTcgKzI1NiwzNCBAQCBzdHJ1Y3QgbXRrX2RkcCB7DQogCS5t
dXRleF9zb2ZfcmVnID0gTVQyNzAxX0RJU1BfTVVURVgwX1NPRjAsDQogfTsNCiANCi1zdGF0aWMg
dW5zaWduZWQgaW50IG10a19kZHBfbW91dF9lbihlbnVtIG10a19kZHBfY29tcF9pZCBjdXIsDQor
Y29uc3Qgc3RydWN0IG10a19tbXN5c19yZWdfZGF0YSBtdDI3MDFfbW1zeXNfcmVnX2RhdGEgPSB7
DQorCS5vdmwwX21vdXRfZW4gPSBESVNQX1JFR19DT05GSUdfRElTUF9PVkxfTU9VVF9FTiwNCisJ
LmRzaTBfc2VsX2luID0gRElTUF9SRUdfQ09ORklHX0RTSV9TRUwsDQorCS5kc2kwX3NlbF9pbl9y
ZG1hMSA9IERTSV9TRUxfSU5fUkRNQSwNCit9Ow0KKw0KK2NvbnN0IHN0cnVjdCBtdGtfbW1zeXNf
cmVnX2RhdGEgbXQ4MTczX21tc3lzX3JlZ19kYXRhID0gew0KKwkub3ZsMF9tb3V0X2VuID0gRElT
UF9SRUdfQ09ORklHX0RJU1BfT1ZMMF9NT1VUX0VOLA0KKwkucmRtYTFfc291dF9zZWxfaW4gPSBE
SVNQX1JFR19DT05GSUdfRElTUF9SRE1BMV9TT1VUX0VOLA0KKwkucmRtYTFfc291dF9kcGkwID0g
UkRNQTFfU09VVF9EUEkwLA0KKwkuZHBpMF9zZWxfaW4gPSBESVNQX1JFR19DT05GSUdfRFBJX1NF
TF9JTiwNCisJLmRwaTBfc2VsX2luX3JkbWExID0gRFBJMF9TRUxfSU5fUkRNQTEsDQorCS5kc2kw
X3NlbF9pbiA9IERJU1BfUkVHX0NPTkZJR19EU0lFX1NFTF9JTiwNCisJLmRzaTBfc2VsX2luX3Jk
bWExID0gRFNJMF9TRUxfSU5fUkRNQTEsDQorfTsNCisNCitzdGF0aWMgdW5zaWduZWQgaW50IG10
a19kZHBfbW91dF9lbihjb25zdCBzdHJ1Y3QgbXRrX21tc3lzX3JlZ19kYXRhICpkYXRhLA0KKwkJ
CQkgICAgZW51bSBtdGtfZGRwX2NvbXBfaWQgY3VyLA0KIAkJCQkgICAgZW51bSBtdGtfZGRwX2Nv
bXBfaWQgbmV4dCwNCiAJCQkJICAgIHVuc2lnbmVkIGludCAqYWRkcikNCiB7DQogCXVuc2lnbmVk
IGludCB2YWx1ZTsNCiANCiAJaWYgKGN1ciA9PSBERFBfQ09NUE9ORU5UX09WTDAgJiYgbmV4dCA9
PSBERFBfQ09NUE9ORU5UX0NPTE9SMCkgew0KLQkJKmFkZHIgPSBESVNQX1JFR19DT05GSUdfRElT
UF9PVkwwX01PVVRfRU47DQorCQkqYWRkciA9IGRhdGEtPm92bDBfbW91dF9lbjsNCiAJCXZhbHVl
ID0gT1ZMMF9NT1VUX0VOX0NPTE9SMDsNCiAJfSBlbHNlIGlmIChjdXIgPT0gRERQX0NPTVBPTkVO
VF9PVkwwICYmIG5leHQgPT0gRERQX0NPTVBPTkVOVF9SRE1BMCkgew0KLQkJKmFkZHIgPSBESVNQ
X1JFR19DT05GSUdfRElTUF9PVkxfTU9VVF9FTjsNCisJCSphZGRyID0gZGF0YS0+b3ZsMF9tb3V0
X2VuOw0KIAkJdmFsdWUgPSBPVkxfTU9VVF9FTl9SRE1BOw0KIAl9IGVsc2UgaWYgKGN1ciA9PSBE
RFBfQ09NUE9ORU5UX09EMCAmJiBuZXh0ID09IEREUF9DT01QT05FTlRfUkRNQTApIHsNCiAJCSph
ZGRyID0gRElTUF9SRUdfQ09ORklHX0RJU1BfT0RfTU9VVF9FTjsNCkBAIC0yOTgsOCArMzI1LDgg
QEAgc3RhdGljIHVuc2lnbmVkIGludCBtdGtfZGRwX21vdXRfZW4oZW51bSBtdGtfZGRwX2NvbXBf
aWQgY3VyLA0KIAkJKmFkZHIgPSBESVNQX1JFR19DT05GSUdfRElTUF9SRE1BMV9TT1VUX0VOOw0K
IAkJdmFsdWUgPSBSRE1BMV9TT1VUX0RTSTM7DQogCX0gZWxzZSBpZiAoY3VyID09IEREUF9DT01Q
T05FTlRfUkRNQTEgJiYgbmV4dCA9PSBERFBfQ09NUE9ORU5UX0RQSTApIHsNCi0JCSphZGRyID0g
RElTUF9SRUdfQ09ORklHX0RJU1BfUkRNQTFfU09VVF9FTjsNCi0JCXZhbHVlID0gUkRNQTFfU09V
VF9EUEkwOw0KKwkJKmFkZHIgPSBkYXRhLT5yZG1hMV9zb3V0X3NlbF9pbjsNCisJCXZhbHVlID0g
ZGF0YS0+cmRtYTFfc291dF9kcGkwOw0KIAl9IGVsc2UgaWYgKGN1ciA9PSBERFBfQ09NUE9ORU5U
X1JETUExICYmIG5leHQgPT0gRERQX0NPTVBPTkVOVF9EUEkxKSB7DQogCQkqYWRkciA9IERJU1Bf
UkVHX0NPTkZJR19ESVNQX1JETUExX1NPVVRfRU47DQogCQl2YWx1ZSA9IFJETUExX1NPVVRfRFBJ
MTsNCkBAIC0zMjUsNyArMzUyLDggQEAgc3RhdGljIHVuc2lnbmVkIGludCBtdGtfZGRwX21vdXRf
ZW4oZW51bSBtdGtfZGRwX2NvbXBfaWQgY3VyLA0KIAlyZXR1cm4gdmFsdWU7DQogfQ0KIA0KLXN0
YXRpYyB1bnNpZ25lZCBpbnQgbXRrX2RkcF9zZWxfaW4oZW51bSBtdGtfZGRwX2NvbXBfaWQgY3Vy
LA0KK3N0YXRpYyB1bnNpZ25lZCBpbnQgbXRrX2RkcF9zZWxfaW4oY29uc3Qgc3RydWN0IG10a19t
bXN5c19yZWdfZGF0YSAqZGF0YSwNCisJCQkJICAgZW51bSBtdGtfZGRwX2NvbXBfaWQgY3VyLA0K
IAkJCQkgICBlbnVtIG10a19kZHBfY29tcF9pZCBuZXh0LA0KIAkJCQkgICB1bnNpZ25lZCBpbnQg
KmFkZHIpDQogew0KQEAgLTMzNSwxNCArMzYzLDE0IEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgbXRr
X2RkcF9zZWxfaW4oZW51bSBtdGtfZGRwX2NvbXBfaWQgY3VyLA0KIAkJKmFkZHIgPSBESVNQX1JF
R19DT05GSUdfRElTUF9DT0xPUjBfU0VMX0lOOw0KIAkJdmFsdWUgPSBDT0xPUjBfU0VMX0lOX09W
TDA7DQogCX0gZWxzZSBpZiAoY3VyID09IEREUF9DT01QT05FTlRfUkRNQTEgJiYgbmV4dCA9PSBE
RFBfQ09NUE9ORU5UX0RQSTApIHsNCi0JCSphZGRyID0gRElTUF9SRUdfQ09ORklHX0RQSV9TRUxf
SU47DQotCQl2YWx1ZSA9IERQSTBfU0VMX0lOX1JETUExOw0KKwkJKmFkZHIgPSBkYXRhLT5kcGkw
X3NlbF9pbjsNCisJCXZhbHVlID0gZGF0YS0+ZHBpMF9zZWxfaW5fcmRtYTE7DQogCX0gZWxzZSBp
ZiAoY3VyID09IEREUF9DT01QT05FTlRfUkRNQTEgJiYgbmV4dCA9PSBERFBfQ09NUE9ORU5UX0RQ
STEpIHsNCiAJCSphZGRyID0gRElTUF9SRUdfQ09ORklHX0RQSV9TRUxfSU47DQogCQl2YWx1ZSA9
IERQSTFfU0VMX0lOX1JETUExOw0KIAl9IGVsc2UgaWYgKGN1ciA9PSBERFBfQ09NUE9ORU5UX1JE
TUExICYmIG5leHQgPT0gRERQX0NPTVBPTkVOVF9EU0kwKSB7DQotCQkqYWRkciA9IERJU1BfUkVH
X0NPTkZJR19EU0lFX1NFTF9JTjsNCi0JCXZhbHVlID0gRFNJMF9TRUxfSU5fUkRNQTE7DQorCQkq
YWRkciA9IGRhdGEtPmRzaTBfc2VsX2luOw0KKwkJdmFsdWUgPSBkYXRhLT5kc2kwX3NlbF9pbl9y
ZG1hMTsNCiAJfSBlbHNlIGlmIChjdXIgPT0gRERQX0NPTVBPTkVOVF9SRE1BMSAmJiBuZXh0ID09
IEREUF9DT01QT05FTlRfRFNJMSkgew0KIAkJKmFkZHIgPSBESVNQX1JFR19DT05GSUdfRFNJT19T
RUxfSU47DQogCQl2YWx1ZSA9IERTSTFfU0VMX0lOX1JETUExOw0KQEAgLTM4OSw3ICs0MTcsOCBA
QCBzdGF0aWMgdW5zaWduZWQgaW50IG10a19kZHBfc2VsX2luKGVudW0gbXRrX2RkcF9jb21wX2lk
IGN1ciwNCiAJcmV0dXJuIHZhbHVlOw0KIH0NCiANCi1zdGF0aWMgdW5zaWduZWQgaW50IG10a19k
ZHBfc291dF9zZWwoZW51bSBtdGtfZGRwX2NvbXBfaWQgY3VyLA0KK3N0YXRpYyB1bnNpZ25lZCBp
bnQgbXRrX2RkcF9zb3V0X3NlbChjb25zdCBzdHJ1Y3QgbXRrX21tc3lzX3JlZ19kYXRhICpkYXRh
LA0KKwkJCQkgICAgIGVudW0gbXRrX2RkcF9jb21wX2lkIGN1ciwNCiAJCQkJICAgICBlbnVtIG10
a19kZHBfY29tcF9pZCBuZXh0LA0KIAkJCQkgICAgIHVuc2lnbmVkIGludCAqYWRkcikNCiB7DQpA
QCAtNDA5LDM1ICs0MzgsMzcgQEAgc3RhdGljIHVuc2lnbmVkIGludCBtdGtfZGRwX3NvdXRfc2Vs
KGVudW0gbXRrX2RkcF9jb21wX2lkIGN1ciwNCiB9DQogDQogdm9pZCBtdGtfZGRwX2FkZF9jb21w
X3RvX3BhdGgoc3RydWN0IHJlZ21hcCAqY29uZmlnX3JlZ3MsDQorCQkJICAgICAgY29uc3Qgc3Ry
dWN0IG10a19tbXN5c19yZWdfZGF0YSAqcmVnX2RhdGEsDQogCQkJICAgICAgZW51bSBtdGtfZGRw
X2NvbXBfaWQgY3VyLA0KIAkJCSAgICAgIGVudW0gbXRrX2RkcF9jb21wX2lkIG5leHQpDQogew0K
IAl1bnNpZ25lZCBpbnQgYWRkciwgdmFsdWU7DQogDQotCXZhbHVlID0gbXRrX2RkcF9tb3V0X2Vu
KGN1ciwgbmV4dCwgJmFkZHIpOw0KKwl2YWx1ZSA9IG10a19kZHBfbW91dF9lbihyZWdfZGF0YSwg
Y3VyLCBuZXh0LCAmYWRkcik7DQogCWlmICh2YWx1ZSkNCiAJCXJlZ21hcF91cGRhdGVfYml0cyhj
b25maWdfcmVncywgYWRkciwgdmFsdWUsIHZhbHVlKTsNCiANCi0JdmFsdWUgPSBtdGtfZGRwX3Nv
dXRfc2VsKGN1ciwgbmV4dCwgJmFkZHIpOw0KKwl2YWx1ZSA9IG10a19kZHBfc291dF9zZWwocmVn
X2RhdGEsIGN1ciwgbmV4dCwgJmFkZHIpOw0KIAlpZiAodmFsdWUpDQogCQlyZWdtYXBfdXBkYXRl
X2JpdHMoY29uZmlnX3JlZ3MsIGFkZHIsIHZhbHVlLCB2YWx1ZSk7DQogDQotCXZhbHVlID0gbXRr
X2RkcF9zZWxfaW4oY3VyLCBuZXh0LCAmYWRkcik7DQorCXZhbHVlID0gbXRrX2RkcF9zZWxfaW4o
cmVnX2RhdGEsIGN1ciwgbmV4dCwgJmFkZHIpOw0KIAlpZiAodmFsdWUpDQogCQlyZWdtYXBfdXBk
YXRlX2JpdHMoY29uZmlnX3JlZ3MsIGFkZHIsIHZhbHVlLCB2YWx1ZSk7DQogfQ0KIA0KIHZvaWQg
bXRrX2RkcF9yZW1vdmVfY29tcF9mcm9tX3BhdGgoc3RydWN0IHJlZ21hcCAqY29uZmlnX3JlZ3Ms
DQorCQkJCSAgIGNvbnN0IHN0cnVjdCBtdGtfbW1zeXNfcmVnX2RhdGEgKnJlZ19kYXRhLA0KIAkJ
CQkgICBlbnVtIG10a19kZHBfY29tcF9pZCBjdXIsDQogCQkJCSAgIGVudW0gbXRrX2RkcF9jb21w
X2lkIG5leHQpDQogew0KIAl1bnNpZ25lZCBpbnQgYWRkciwgdmFsdWU7DQogDQotCXZhbHVlID0g
bXRrX2RkcF9tb3V0X2VuKGN1ciwgbmV4dCwgJmFkZHIpOw0KKwl2YWx1ZSA9IG10a19kZHBfbW91
dF9lbihyZWdfZGF0YSwgY3VyLCBuZXh0LCAmYWRkcik7DQogCWlmICh2YWx1ZSkNCiAJCXJlZ21h
cF91cGRhdGVfYml0cyhjb25maWdfcmVncywgYWRkciwgdmFsdWUsIDApOw0KIA0KLQl2YWx1ZSA9
IG10a19kZHBfc2VsX2luKGN1ciwgbmV4dCwgJmFkZHIpOw0KKwl2YWx1ZSA9IG10a19kZHBfc2Vs
X2luKHJlZ19kYXRhLCBjdXIsIG5leHQsICZhZGRyKTsNCiAJaWYgKHZhbHVlKQ0KIAkJcmVnbWFw
X3VwZGF0ZV9iaXRzKGNvbmZpZ19yZWdzLCBhZGRyLCB2YWx1ZSwgMCk7DQogfQ0KZGlmZiAtLWdp
dCBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2RkcC5oIGIvZHJpdmVycy9ncHUv
ZHJtL21lZGlhdGVrL210a19kcm1fZGRwLmgNCmluZGV4IDAxZmY4YjYuLjc1ZmE1NmUgMTAwNjQ0
DQotLS0gYS9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kZHAuaA0KKysrIGIvZHJp
dmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fZGRwLmgNCkBAIC0xMSwxMSArMTEsMTcgQEAN
CiBzdHJ1Y3QgcmVnbWFwOw0KIHN0cnVjdCBkZXZpY2U7DQogc3RydWN0IG10a19kaXNwX211dGV4
Ow0KK3N0cnVjdCBtdGtfbW1zeXNfcmVnX2RhdGE7DQorDQorZXh0ZXJuIGNvbnN0IHN0cnVjdCBt
dGtfbW1zeXNfcmVnX2RhdGEgbXQyNzAxX21tc3lzX3JlZ19kYXRhOw0KK2V4dGVybiBjb25zdCBz
dHJ1Y3QgbXRrX21tc3lzX3JlZ19kYXRhIG10ODE3M19tbXN5c19yZWdfZGF0YTsNCiANCiB2b2lk
IG10a19kZHBfYWRkX2NvbXBfdG9fcGF0aChzdHJ1Y3QgcmVnbWFwICpjb25maWdfcmVncywNCisJ
CQkgICAgICBjb25zdCBzdHJ1Y3QgbXRrX21tc3lzX3JlZ19kYXRhICpyZWdfZGF0YSwNCiAJCQkg
ICAgICBlbnVtIG10a19kZHBfY29tcF9pZCBjdXIsDQogCQkJICAgICAgZW51bSBtdGtfZGRwX2Nv
bXBfaWQgbmV4dCk7DQogdm9pZCBtdGtfZGRwX3JlbW92ZV9jb21wX2Zyb21fcGF0aChzdHJ1Y3Qg
cmVnbWFwICpjb25maWdfcmVncywNCisJCQkJICAgY29uc3Qgc3RydWN0IG10a19tbXN5c19yZWdf
ZGF0YSAqcmVnX2RhdGEsDQogCQkJCSAgIGVudW0gbXRrX2RkcF9jb21wX2lkIGN1ciwNCiAJCQkJ
ICAgZW51bSBtdGtfZGRwX2NvbXBfaWQgbmV4dCk7DQogDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9n
cHUvZHJtL21lZGlhdGVrL210a19kcm1fZHJ2LmMgYi9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsv
bXRrX2RybV9kcnYuYw0KaW5kZXggZjY5YWY0Mi4uZTMyOTNjZjggMTAwNjQ0DQotLS0gYS9kcml2
ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kcnYuYw0KKysrIGIvZHJpdmVycy9ncHUvZHJt
L21lZGlhdGVrL210a19kcm1fZHJ2LmMNCkBAIC0xODUsNiArMTg1LDcgQEAgc3RhdGljIGludCBt
dGtfYXRvbWljX2NvbW1pdChzdHJ1Y3QgZHJtX2RldmljZSAqZHJtLA0KIAkubWFpbl9sZW4gPSBB
UlJBWV9TSVpFKG10MjcwMV9tdGtfZGRwX21haW4pLA0KIAkuZXh0X3BhdGggPSBtdDI3MDFfbXRr
X2RkcF9leHQsDQogCS5leHRfbGVuID0gQVJSQVlfU0laRShtdDI3MDFfbXRrX2RkcF9leHQpLA0K
KwkucmVnX2RhdGEgPSAmbXQyNzAxX21tc3lzX3JlZ19kYXRhLA0KIAkuc2hhZG93X3JlZ2lzdGVy
ID0gdHJ1ZSwNCiAJLmNsa19kcnZfbmFtZSA9ICJjbGstbXQyNzAxLW1tIiwNCiB9Ow0KQEAgLTE5
Niw2ICsxOTcsNyBAQCBzdGF0aWMgaW50IG10a19hdG9taWNfY29tbWl0KHN0cnVjdCBkcm1fZGV2
aWNlICpkcm0sDQogCS5leHRfbGVuID0gQVJSQVlfU0laRShtdDI3MTJfbXRrX2RkcF9leHQpLA0K
IAkudGhpcmRfcGF0aCA9IG10MjcxMl9tdGtfZGRwX3RoaXJkLA0KIAkudGhpcmRfbGVuID0gQVJS
QVlfU0laRShtdDI3MTJfbXRrX2RkcF90aGlyZCksDQorCS5yZWdfZGF0YSA9ICZtdDgxNzNfbW1z
eXNfcmVnX2RhdGEsDQogCS5jbGtfZHJ2X25hbWUgPSAiY2xrLW10MjcxMi1tbSIsDQogfTsNCiAN
CkBAIC0yMDQsNiArMjA2LDcgQEAgc3RhdGljIGludCBtdGtfYXRvbWljX2NvbW1pdChzdHJ1Y3Qg
ZHJtX2RldmljZSAqZHJtLA0KIAkubWFpbl9sZW4gPSBBUlJBWV9TSVpFKG10ODE3M19tdGtfZGRw
X21haW4pLA0KIAkuZXh0X3BhdGggPSBtdDgxNzNfbXRrX2RkcF9leHQsDQogCS5leHRfbGVuID0g
QVJSQVlfU0laRShtdDgxNzNfbXRrX2RkcF9leHQpLA0KKwkucmVnX2RhdGEgPSAmbXQ4MTczX21t
c3lzX3JlZ19kYXRhLA0KIAkuY2xrX2Rydl9uYW1lID0gImNsay1tdDgxNzMtbW0iLA0KIH07DQog
DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL21lZGlhdGVrL210a19kcm1fZHJ2LmggYi9k
cml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kcnYuaA0KaW5kZXggOGZlOTEzNi4uOWQ4
NzQ0MSAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvZ3B1L2RybS9tZWRpYXRlay9tdGtfZHJtX2Rydi5o
DQorKysgYi9kcml2ZXJzL2dwdS9kcm0vbWVkaWF0ZWsvbXRrX2RybV9kcnYuaA0KQEAgLTcsNiAr
Nyw3IEBADQogI2RlZmluZSBNVEtfRFJNX0RSVl9IDQogDQogI2luY2x1ZGUgPGxpbnV4L2lvLmg+
DQorI2luY2x1ZGUgIm10a19kcm1fZGRwLmgiDQogI2luY2x1ZGUgIm10a19kcm1fZGRwX2NvbXAu
aCINCiANCiAjZGVmaW5lIE1BWF9DUlRDCTMNCkBAIC0yOCw2ICsyOSw4IEBAIHN0cnVjdCBtdGtf
bW1zeXNfZHJpdmVyX2RhdGEgew0KIAljb25zdCBlbnVtIG10a19kZHBfY29tcF9pZCAqdGhpcmRf
cGF0aDsNCiAJdW5zaWduZWQgaW50IHRoaXJkX2xlbjsNCiANCisJY29uc3Qgc3RydWN0IG10a19t
bXN5c19yZWdfZGF0YSAqcmVnX2RhdGE7DQorDQogCWJvb2wgc2hhZG93X3JlZ2lzdGVyOw0KIAlj
b25zdCBjaGFyICpjbGtfZHJ2X25hbWU7DQogfTsNCi0tIA0KMS44LjEuMS5kaXJ0eQ0K

