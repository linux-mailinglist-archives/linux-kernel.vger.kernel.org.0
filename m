Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 24A9A788D4
	for <lists+linux-kernel@lfdr.de>; Mon, 29 Jul 2019 11:49:08 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1728028AbfG2JtF convert rfc822-to-8bit (ORCPT
        <rfc822;lists+linux-kernel@lfdr.de>); Mon, 29 Jul 2019 05:49:05 -0400
Received: from foss.arm.com ([217.140.110.172]:40918 "EHLO foss.arm.com"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1726167AbfG2JtF (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Mon, 29 Jul 2019 05:49:05 -0400
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
        by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id 40B041570;
        Mon, 29 Jul 2019 02:49:04 -0700 (PDT)
Received: from big-swifty.misterjones.org (g-dizzle.cambridge.arm.com [10.1.32.80])
        by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPSA id 94D3F3F694;
        Mon, 29 Jul 2019 02:49:02 -0700 (PDT)
Date:   Mon, 29 Jul 2019 10:49:00 +0100
Message-ID: <86tvb5mar7.wl-marc.zyngier@arm.com>
From:   Marc Zyngier <marc.zyngier@arm.com>
To:     Anders Roxell <anders.roxell@linaro.org>
Cc:     Catalin Marinas <catalin.marinas@arm.com>, will@kernel.org,
        Linux ARM <linux-arm-kernel@lists.infradead.org>,
        kvmarm@lists.cs.columbia.edu,
        Linux Kernel Mailing List <linux-kernel@vger.kernel.org>
Subject: Re: [PATCH 2/2] arm64: KVM: hyp: debug-sr: Mark expected switch fall-through
In-Reply-To: <CADYN=9KmNwsP7TDkf30xCa8ARVzQ_q=-v8cwkFueQ+NT-9JdyQ@mail.gmail.com>
References: <20190726112710.19051-1-anders.roxell@linaro.org>
        <86d0hxnfif.wl-marc.zyngier@arm.com>
        <CADYN=9KmNwsP7TDkf30xCa8ARVzQ_q=-v8cwkFueQ+NT-9JdyQ@mail.gmail.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 EasyPG/1.0.0 Emacs/26
 (aarch64-unknown-linux-gnu) MULE/6.0 (HANACHIRUSATO)
Organization: ARM Ltd
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8BIT
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Fri, 26 Jul 2019 15:11:05 +0100,
Anders Roxell <anders.roxell@linaro.org> wrote:
> 
> On Fri, 26 Jul 2019 at 14:31, Marc Zyngier <marc.zyngier@arm.com> wrote:
> >
> > On Fri, 26 Jul 2019 12:27:10 +0100,
> > Anders Roxell <anders.roxell@linaro.org> wrote:
> > >
> > > When fall-through warnings was enabled by default the following warnings
> > > was starting to show up:
> > >
> > > ../arch/arm64/kvm/hyp/debug-sr.c: In function ‘__debug_save_state’:
> > > ../arch/arm64/kvm/hyp/debug-sr.c:20:19: warning: this statement may fall
> > >  through [-Wimplicit-fallthrough=]
> > >   case 15: ptr[15] = read_debug(reg, 15);   \
> > > ../arch/arm64/kvm/hyp/debug-sr.c:113:2: note: in expansion of macro ‘save_debug’
> > >   save_debug(dbg->dbg_bcr, dbgbcr, brps);
> > >   ^~~~~~~~~~
> > > ../arch/arm64/kvm/hyp/debug-sr.c:21:2: note: here
> > >   case 14: ptr[14] = read_debug(reg, 14);   \
> > >   ^~~~
> > > ../arch/arm64/kvm/hyp/debug-sr.c:113:2: note: in expansion of macro ‘save_debug’
> > >   save_debug(dbg->dbg_bcr, dbgbcr, brps);
> > >   ^~~~~~~~~~
> > > ../arch/arm64/kvm/hyp/debug-sr.c:21:19: warning: this statement may fall
> > >  through [-Wimplicit-fallthrough=]
> > >   case 14: ptr[14] = read_debug(reg, 14);   \
> > > ../arch/arm64/kvm/hyp/debug-sr.c:113:2: note: in expansion of macro ‘save_debug’
> > >   save_debug(dbg->dbg_bcr, dbgbcr, brps);
> > >   ^~~~~~~~~~
> > > ../arch/arm64/kvm/hyp/debug-sr.c:22:2: note: here
> > >   case 13: ptr[13] = read_debug(reg, 13);   \
> > >   ^~~~
> > > ../arch/arm64/kvm/hyp/debug-sr.c:113:2: note: in expansion of macro ‘save_debug’
> > >   save_debug(dbg->dbg_bcr, dbgbcr, brps);
> > >   ^~~~~~~~~~
> > >
> > > Rework to add a 'break;' where the compiler warned about
> > > fall-through.
> >
> > That's not what this patch does, I'm afraid.
> 
> urgh I'm sorry.
> Sending a v2 shortly.

Don't bother, I'll fix it locally.

Thanks,

	M.

-- 
Jazz is not dead, it just smells funny.
