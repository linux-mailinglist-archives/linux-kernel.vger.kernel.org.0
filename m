Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 750261171E1
	for <lists+linux-kernel@lfdr.de>; Mon,  9 Dec 2019 17:34:04 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727077AbfLIQdv (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Mon, 9 Dec 2019 11:33:51 -0500
Received: from mx2.suse.de ([195.135.220.15]:60202 "EHLO mx1.suse.de"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1726674AbfLIQdt (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Mon, 9 Dec 2019 11:33:49 -0500
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
        by mx1.suse.de (Postfix) with ESMTP id 80CF4AC2C;
        Mon,  9 Dec 2019 16:33:48 +0000 (UTC)
Date:   Mon, 09 Dec 2019 17:33:48 +0100
Message-ID: <s5hv9qpcvbn.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     Chuhong Yuan <hslester96@gmail.com>
Cc:     Jaroslav Kysela <perex@perex.cz>, Takashi Iwai <tiwai@suse.com>,
        alsa-devel@alsa-project.org, linux-kernel@vger.kernel.org
Subject: Re: [PATCH] ALSA: hda/ca0132 - add missed snd_hda_gen_parse_auto_config
In-Reply-To: <20191209162119.14820-1-hslester96@gmail.com>
References: <20191209162119.14820-1-hslester96@gmail.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Mon, 09 Dec 2019 17:21:19 +0100,
Chuhong Yuan wrote:
> 
> It is found that all usages of snd_hda_parse_pin_defcfg() are followed
> with snd_hda_gen_parse_auto_config() except here.
> This should be a miss and needs to add the missed call.

No, this will break things badly.

CA0132 codec driver has own configurator, and the pincfg parser is
called there because the initialization function requires the pincfg
information for the digital audio pins.


thanks,

Takashi


> 
> Signed-off-by: Chuhong Yuan <hslester96@gmail.com>
> ---
>  sound/pci/hda/patch_ca0132.c | 5 +++++
>  1 file changed, 5 insertions(+)
> 
> diff --git a/sound/pci/hda/patch_ca0132.c b/sound/pci/hda/patch_ca0132.c
> index b7a1abb3e231..ea1187a13241 100644
> --- a/sound/pci/hda/patch_ca0132.c
> +++ b/sound/pci/hda/patch_ca0132.c
> @@ -24,6 +24,7 @@
>  #include "hda_local.h"
>  #include "hda_auto_parser.h"
>  #include "hda_jack.h"
> +#include "hda_generic.h"
>  
>  #include "ca0132_regs.h"
>  
> @@ -8844,6 +8845,10 @@ static int patch_ca0132(struct hda_codec *codec)
>  	if (err < 0)
>  		goto error;
>  
> +	err = snd_hda_gen_parse_auto_config(codec, &spec->autocfg);
> +	if (err < 0)
> +		goto error;
> +
>  	return 0;
>  
>   error:
> -- 
> 2.24.0
> 
