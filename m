Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 63C5123DA6
	for <lists+linux-kernel@lfdr.de>; Mon, 20 May 2019 18:39:25 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2392626AbfETQjM (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Mon, 20 May 2019 12:39:12 -0400
Received: from mail-eopbgr30085.outbound.protection.outlook.com ([40.107.3.85]:28806
        "EHLO EUR03-AM5-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S2391435AbfETQjI (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Mon, 20 May 2019 12:39:08 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=itdevltd.onmicrosoft.com; s=selector1-itdevltd-onmicrosoft-com;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=P+zHgcExANDLE4IWH6V8rLshAlVA2jn2qE+lWxfbB5c=;
 b=NHfyFlNVZmwONhK/2Kfp2hG4o9k1/LhlkNKelZ+YsBMOL5MPDdo2FZFU3d88jUG0OTdpmHXmBx5vjAM2EWVkfZXk1B0yEMfKJl67qsOCR0+ghy27Fa9Ls/qxwYUehWEcnV1gI4sIiPLR18eMh28jqMv00qjr+JH9o579e3E+Dqs=
Received: from VI1PR08MB3168.eurprd08.prod.outlook.com (52.133.15.143) by
 VI1PR08MB3662.eurprd08.prod.outlook.com (20.177.61.89) with Microsoft SMTP
 Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1900.17; Mon, 20 May 2019 16:39:02 +0000
Received: from VI1PR08MB3168.eurprd08.prod.outlook.com
 ([fe80::1d25:dae7:53a6:b461]) by VI1PR08MB3168.eurprd08.prod.outlook.com
 ([fe80::1d25:dae7:53a6:b461%3]) with mapi id 15.20.1900.020; Mon, 20 May 2019
 16:39:02 +0000
From:   Quentin Deslandes <quentin.deslandes@itdev.co.uk>
To:     "devel@driverdev.osuosl.org" <devel@driverdev.osuosl.org>
CC:     Forest Bond <forest@alittletooquiet.net>,
        Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
        Quentin Deslandes <quentin.deslandes@itdev.co.uk>,
        Mukesh Ojha <mojha@codeaurora.org>,
        Ojaswin Mujoo <ojaswin25111998@gmail.com>,
        Nishad Kamdar <nishadkamdar@gmail.com>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
Subject: [PATCH 2/7] staging: vt6656: clean function's error path in usbpipe.c
Thread-Topic: [PATCH 2/7] staging: vt6656: clean function's error path in
 usbpipe.c
Thread-Index: AQHVDyqH33HY9G1vdkSkWvMIogsj9A==
Date:   Mon, 20 May 2019 16:39:01 +0000
Message-ID: <20190520163844.1225-3-quentin.deslandes@itdev.co.uk>
References: <20190520163844.1225-1-quentin.deslandes@itdev.co.uk>
In-Reply-To: <20190520163844.1225-1-quentin.deslandes@itdev.co.uk>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: AM6PR08CA0002.eurprd08.prod.outlook.com
 (2603:10a6:20b:b2::14) To VI1PR08MB3168.eurprd08.prod.outlook.com
 (2603:10a6:803:47::15)
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=quentin.deslandes@itdev.co.uk; 
x-ms-exchange-messagesentrepresentingtype: 1
x-mailer: git-send-email 2.17.1
x-originating-ip: [89.21.227.133]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: d0fae776-b782-4861-3ee4-08d6dd41aa0c
x-microsoft-antispam: BCL:0;PCL:0;RULEID:(2390118)(7020095)(4652040)(7021145)(8989299)(4534185)(7022145)(4603075)(4627221)(201702281549075)(8990200)(7048125)(7024125)(7027125)(7023125)(5600141)(711020)(4605104)(2017052603328)(7193020);SRVR:VI1PR08MB3662;
x-ms-traffictypediagnostic: VI1PR08MB3662:
x-microsoft-antispam-prvs: <VI1PR08MB366275A16EC51FAA4D7B710EB3060@VI1PR08MB3662.eurprd08.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:3826;
x-forefront-prvs: 004395A01C
x-forefront-antispam-report: SFV:NSPM;SFS:(10009020)(979002)(39830400003)(346002)(366004)(376002)(396003)(136003)(199004)(189003)(1730700003)(2501003)(14454004)(73956011)(486006)(8936002)(44832011)(71190400001)(71200400001)(50226002)(81156014)(81166006)(4326008)(66446008)(64756008)(66556008)(66946007)(66476007)(8676002)(53936002)(446003)(316002)(11346002)(476003)(2616005)(305945005)(6436002)(66066001)(508600001)(6486002)(7736002)(5640700003)(68736007)(25786009)(186003)(6512007)(14444005)(86362001)(256004)(6116002)(3846002)(1076003)(5660300002)(26005)(36756003)(76176011)(99286004)(6916009)(6506007)(386003)(52116002)(102836004)(2351001)(54906003)(74482002)(2906002)(969003)(989001)(999001)(1009001)(1019001);DIR:OUT;SFP:1101;SCL:1;SRVR:VI1PR08MB3662;H:VI1PR08MB3168.eurprd08.prod.outlook.com;FPR:;SPF:None;LANG:en;PTR:InfoNoRecords;A:1;MX:1;
received-spf: None (protection.outlook.com: itdev.co.uk does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: AY00TAjnLHJgz3g9iarjcLODaYzFiZK+5sUfyzKIxryKzYWCnBXu7ECO8UjtHiNgRC0QqRN9/pCTFelpMSflE65XqWSOjJD1vhqry2MY01p771ouNnSJ74fcIvYsy8OA988XJ2CHeOpNfgclKAHfflkAcxc9YN60SbFFgOtAzaXHMXGASFy4n/7FelZaBPIi/h2B1MrQoZhXUMo7s8KhCu9rsSFn0UavspFnHucD7MdEP0fhq5104t+VSa8N8hghxM3Uly2g5LjbQkzrsEwYtXVyxZgdxa7TPxlhOTAfmfzE/8k0bGoRs1Ln7ou+WG841fdePjqrazJAhSJ1FltwiL44JoETKTH/K+tjGaOnghu1xT4hzfji5GvSyjrek2dGvYOwTHS6BQTVkEt5Y74qDicLGPB7U+6ZXc1Wo3aXG/o=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: itdev.co.uk
X-MS-Exchange-CrossTenant-Network-Message-Id: d0fae776-b782-4861-3ee4-08d6dd41aa0c
X-MS-Exchange-CrossTenant-originalarrivaltime: 20 May 2019 16:39:01.8873
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 2d2930c4-2251-45b4-ad79-3582c5f41740
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-Transport-CrossTenantHeadersStamped: VI1PR08MB3662
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

QXZvaWQgZGlzY2FyZGluZyBjYWxsZWQgZnVuY3Rpb24ncyByZXR1cm5lZCB2YWx1ZS4gU3RvcmUg
aXQgaW5zdGVhZCBpbg0Kb3JkZXIgdG8gYWN0IGFjY29yZGluZ2x5Lg0KDQpVcGRhdGUgZXJyb3Ig
cGF0aCB0byByZXR1cm4gMCBvbiBzdWNjZXNzIGFuZCBhIG5lZ2F0aXZlIGVycm5vIHZhbHVlIG9u
DQplcnJvci4NCg0KU2lnbmVkLW9mZi1ieTogUXVlbnRpbiBEZXNsYW5kZXMgPHF1ZW50aW4uZGVz
bGFuZGVzQGl0ZGV2LmNvLnVrPg0KLS0tDQogZHJpdmVycy9zdGFnaW5nL3Z0NjY1Ni91c2JwaXBl
LmMgfCAxMTUgKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLQ0KIGRyaXZlcnMvc3RhZ2lu
Zy92dDY2NTYvdXNicGlwZS5oIHwgICA0ICstDQogMiBmaWxlcyBjaGFuZ2VkLCA2NyBpbnNlcnRp
b25zKCspLCA1MiBkZWxldGlvbnMoLSkNCg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvc3RhZ2luZy92
dDY2NTYvdXNicGlwZS5jIGIvZHJpdmVycy9zdGFnaW5nL3Z0NjY1Ni91c2JwaXBlLmMNCmluZGV4
IDViYmM1NmY4Nzc5ZS4uZmYzNTFhN2EwODc2IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9zdGFnaW5n
L3Z0NjY1Ni91c2JwaXBlLmMNCisrKyBiL2RyaXZlcnMvc3RhZ2luZy92dDY2NTYvdXNicGlwZS5j
DQpAQCAtMzYsODAgKzM2LDg2IEBADQogaW50IHZudF9jb250cm9sX291dChzdHJ1Y3Qgdm50X3By
aXZhdGUgKnByaXYsIHU4IHJlcXVlc3QsIHUxNiB2YWx1ZSwNCiAJCSAgICB1MTYgaW5kZXgsIHUx
NiBsZW5ndGgsIHU4ICpidWZmZXIpDQogew0KLQlpbnQgc3RhdHVzID0gMDsNCisJaW50IHJldCA9
IDA7DQogCXU4ICp1c2JfYnVmZmVyOw0KIA0KLQlpZiAodGVzdF9iaXQoREVWSUNFX0ZMQUdTX0RJ
U0NPTk5FQ1RFRCwgJnByaXYtPmZsYWdzKSkNCi0JCXJldHVybiBTVEFUVVNfRkFJTFVSRTsNCisJ
aWYgKHRlc3RfYml0KERFVklDRV9GTEFHU19ESVNDT05ORUNURUQsICZwcml2LT5mbGFncykpIHsN
CisJCXJldCA9IC1FSU5WQUw7DQorCQlnb3RvIGVuZDsNCisJfQ0KIA0KIAltdXRleF9sb2NrKCZw
cml2LT51c2JfbG9jayk7DQogDQogCXVzYl9idWZmZXIgPSBrbWVtZHVwKGJ1ZmZlciwgbGVuZ3Ro
LCBHRlBfS0VSTkVMKTsNCiAJaWYgKCF1c2JfYnVmZmVyKSB7DQotCQltdXRleF91bmxvY2soJnBy
aXYtPnVzYl9sb2NrKTsNCi0JCXJldHVybiAtRU5PTUVNOw0KKwkJcmV0ID0gLUVOT01FTTsNCisJ
CWdvdG8gZW5kX3VubG9jazsNCiAJfQ0KIA0KLQlzdGF0dXMgPSB1c2JfY29udHJvbF9tc2cocHJp
di0+dXNiLA0KLQkJCQkgdXNiX3NuZGN0cmxwaXBlKHByaXYtPnVzYiwgMCksDQotCQkJCSByZXF1
ZXN0LCAweDQwLCB2YWx1ZSwNCi0JCQkJIGluZGV4LCB1c2JfYnVmZmVyLCBsZW5ndGgsIFVTQl9D
VExfV0FJVCk7DQorCXJldCA9IHVzYl9jb250cm9sX21zZyhwcml2LT51c2IsDQorCQkJICAgICAg
dXNiX3NuZGN0cmxwaXBlKHByaXYtPnVzYiwgMCksDQorCQkJICAgICAgcmVxdWVzdCwgMHg0MCwg
dmFsdWUsDQorCQkJICAgICAgaW5kZXgsIHVzYl9idWZmZXIsIGxlbmd0aCwgVVNCX0NUTF9XQUlU
KTsNCiANCiAJa2ZyZWUodXNiX2J1ZmZlcik7DQogDQotCW11dGV4X3VubG9jaygmcHJpdi0+dXNi
X2xvY2spOw0KKwlpZiAocmV0ID49IDAgJiYgcmV0IDwgKGludClsZW5ndGgpDQorCQlyZXQgPSAt
RUlPOw0KIA0KLQlpZiAoc3RhdHVzIDwgKGludClsZW5ndGgpDQotCQlyZXR1cm4gU1RBVFVTX0ZB
SUxVUkU7DQotDQotCXJldHVybiBTVEFUVVNfU1VDQ0VTUzsNCitlbmRfdW5sb2NrOg0KKwltdXRl
eF91bmxvY2soJnByaXYtPnVzYl9sb2NrKTsNCitlbmQ6DQorCXJldHVybiByZXQ7DQogfQ0KIA0K
LXZvaWQgdm50X2NvbnRyb2xfb3V0X3U4KHN0cnVjdCB2bnRfcHJpdmF0ZSAqcHJpdiwgdTggcmVn
LCB1OCByZWdfb2ZmLCB1OCBkYXRhKQ0KK2ludCB2bnRfY29udHJvbF9vdXRfdTgoc3RydWN0IHZu
dF9wcml2YXRlICpwcml2LCB1OCByZWcsIHU4IHJlZ19vZmYsIHU4IGRhdGEpDQogew0KLQl2bnRf
Y29udHJvbF9vdXQocHJpdiwgTUVTU0FHRV9UWVBFX1dSSVRFLA0KLQkJCXJlZ19vZmYsIHJlZywg
c2l6ZW9mKHU4KSwgJmRhdGEpOw0KKwlyZXR1cm4gdm50X2NvbnRyb2xfb3V0KHByaXYsIE1FU1NB
R0VfVFlQRV9XUklURSwNCisJCQkgICAgICAgcmVnX29mZiwgcmVnLCBzaXplb2YodTgpLCAmZGF0
YSk7DQogfQ0KIA0KIGludCB2bnRfY29udHJvbF9pbihzdHJ1Y3Qgdm50X3ByaXZhdGUgKnByaXYs
IHU4IHJlcXVlc3QsIHUxNiB2YWx1ZSwNCiAJCSAgIHUxNiBpbmRleCwgdTE2IGxlbmd0aCwgdTgg
KmJ1ZmZlcikNCiB7DQotCWludCBzdGF0dXM7DQorCWludCByZXQgPSAwOw0KIAl1OCAqdXNiX2J1
ZmZlcjsNCiANCi0JaWYgKHRlc3RfYml0KERFVklDRV9GTEFHU19ESVNDT05ORUNURUQsICZwcml2
LT5mbGFncykpDQotCQlyZXR1cm4gU1RBVFVTX0ZBSUxVUkU7DQorCWlmICh0ZXN0X2JpdChERVZJ
Q0VfRkxBR1NfRElTQ09OTkVDVEVELCAmcHJpdi0+ZmxhZ3MpKSB7DQorCQlyZXQgPSAtRUlOVkFM
Ow0KKwkJZ290byBlbmQ7DQorCX0NCiANCiAJbXV0ZXhfbG9jaygmcHJpdi0+dXNiX2xvY2spOw0K
IA0KIAl1c2JfYnVmZmVyID0ga21hbGxvYyhsZW5ndGgsIEdGUF9LRVJORUwpOw0KIAlpZiAoIXVz
Yl9idWZmZXIpIHsNCi0JCW11dGV4X3VubG9jaygmcHJpdi0+dXNiX2xvY2spOw0KLQkJcmV0dXJu
IC1FTk9NRU07DQorCQlyZXQgPSAtRU5PTUVNOw0KKwkJZ290byBlbmRfdW5sb2NrOw0KIAl9DQog
DQotCXN0YXR1cyA9IHVzYl9jb250cm9sX21zZyhwcml2LT51c2IsDQotCQkJCSB1c2JfcmN2Y3Ry
bHBpcGUocHJpdi0+dXNiLCAwKSwNCi0JCQkJIHJlcXVlc3QsIDB4YzAsIHZhbHVlLA0KLQkJCQkg
aW5kZXgsIHVzYl9idWZmZXIsIGxlbmd0aCwgVVNCX0NUTF9XQUlUKTsNCisJcmV0ID0gdXNiX2Nv
bnRyb2xfbXNnKHByaXYtPnVzYiwNCisJCQkgICAgICB1c2JfcmN2Y3RybHBpcGUocHJpdi0+dXNi
LCAwKSwNCisJCQkgICAgICByZXF1ZXN0LCAweGMwLCB2YWx1ZSwNCisJCQkgICAgICBpbmRleCwg
dXNiX2J1ZmZlciwgbGVuZ3RoLCBVU0JfQ1RMX1dBSVQpOw0KIA0KLQlpZiAoc3RhdHVzID09IGxl
bmd0aCkNCisJaWYgKHJldCA9PSBsZW5ndGgpDQogCQltZW1jcHkoYnVmZmVyLCB1c2JfYnVmZmVy
LCBsZW5ndGgpOw0KIA0KIAlrZnJlZSh1c2JfYnVmZmVyKTsNCiANCi0JbXV0ZXhfdW5sb2NrKCZw
cml2LT51c2JfbG9jayk7DQorCWlmIChyZXQgPj0gMCAmJiByZXQgPCAoaW50KWxlbmd0aCkNCisJ
CXJldCA9IC1FSU87DQogDQotCWlmIChzdGF0dXMgPCAoaW50KWxlbmd0aCkNCi0JCXJldHVybiBT
VEFUVVNfRkFJTFVSRTsNCi0NCi0JcmV0dXJuIFNUQVRVU19TVUNDRVNTOw0KK2VuZF91bmxvY2s6
DQorCW11dGV4X3VubG9jaygmcHJpdi0+dXNiX2xvY2spOw0KK2VuZDoNCisJcmV0dXJuIHJldDsN
CiB9DQogDQotdm9pZCB2bnRfY29udHJvbF9pbl91OChzdHJ1Y3Qgdm50X3ByaXZhdGUgKnByaXYs
IHU4IHJlZywgdTggcmVnX29mZiwgdTggKmRhdGEpDQoraW50IHZudF9jb250cm9sX2luX3U4KHN0
cnVjdCB2bnRfcHJpdmF0ZSAqcHJpdiwgdTggcmVnLCB1OCByZWdfb2ZmLCB1OCAqZGF0YSkNCiB7
DQotCXZudF9jb250cm9sX2luKHByaXYsIE1FU1NBR0VfVFlQRV9SRUFELA0KLQkJICAgICAgIHJl
Z19vZmYsIHJlZywgc2l6ZW9mKHU4KSwgZGF0YSk7DQorCXJldHVybiB2bnRfY29udHJvbF9pbihw
cml2LCBNRVNTQUdFX1RZUEVfUkVBRCwNCisJCQkgICAgICByZWdfb2ZmLCByZWcsIHNpemVvZih1
OCksIGRhdGEpOw0KIH0NCiANCiBzdGF0aWMgdm9pZCB2bnRfc3RhcnRfaW50ZXJydXB0X3VyYl9j
b21wbGV0ZShzdHJ1Y3QgdXJiICp1cmIpDQpAQCAtMTQ3LDEwICsxNTMsMTIgQEAgc3RhdGljIHZv
aWQgdm50X3N0YXJ0X2ludGVycnVwdF91cmJfY29tcGxldGUoc3RydWN0IHVyYiAqdXJiKQ0KIA0K
IGludCB2bnRfc3RhcnRfaW50ZXJydXB0X3VyYihzdHJ1Y3Qgdm50X3ByaXZhdGUgKnByaXYpDQog
ew0KLQlpbnQgc3RhdHVzID0gU1RBVFVTX0ZBSUxVUkU7DQorCWludCByZXQgPSAwOw0KIA0KLQlp
ZiAocHJpdi0+aW50X2J1Zi5pbl91c2UpDQotCQlyZXR1cm4gU1RBVFVTX0ZBSUxVUkU7DQorCWlm
IChwcml2LT5pbnRfYnVmLmluX3VzZSkgew0KKwkJcmV0ID0gLUVCVVNZOw0KKwkJZ290byBlcnI7
DQorCX0NCiANCiAJcHJpdi0+aW50X2J1Zi5pbl91c2UgPSB0cnVlOw0KIA0KQEAgLTE2MywxMyAr
MTcxLDE4IEBAIGludCB2bnRfc3RhcnRfaW50ZXJydXB0X3VyYihzdHJ1Y3Qgdm50X3ByaXZhdGUg
KnByaXYpDQogCQkJIHByaXYsDQogCQkJIHByaXYtPmludF9pbnRlcnZhbCk7DQogDQotCXN0YXR1
cyA9IHVzYl9zdWJtaXRfdXJiKHByaXYtPmludGVycnVwdF91cmIsIEdGUF9BVE9NSUMpOw0KLQlp
ZiAoc3RhdHVzKSB7DQotCQlkZXZfZGJnKCZwcml2LT51c2ItPmRldiwgIlN1Ym1pdCBpbnQgVVJC
IGZhaWxlZCAlZFxuIiwgc3RhdHVzKTsNCi0JCXByaXYtPmludF9idWYuaW5fdXNlID0gZmFsc2U7
DQorCXJldCA9IHVzYl9zdWJtaXRfdXJiKHByaXYtPmludGVycnVwdF91cmIsIEdGUF9BVE9NSUMp
Ow0KKwlpZiAocmV0KSB7DQorCQlkZXZfZGJnKCZwcml2LT51c2ItPmRldiwgIlN1Ym1pdCBpbnQg
VVJCIGZhaWxlZCAlZFxuIiwgcmV0KTsNCisJCWdvdG8gZXJyX3N1Ym1pdDsNCiAJfQ0KIA0KLQly
ZXR1cm4gc3RhdHVzOw0KKwlyZXR1cm4gMDsNCisNCitlcnJfc3VibWl0Og0KKwlwcml2LT5pbnRf
YnVmLmluX3VzZSA9IGZhbHNlOw0KK2VycjoNCisJcmV0dXJuIHJldDsNCiB9DQogDQogc3RhdGlj
IHZvaWQgdm50X3N1Ym1pdF9yeF91cmJfY29tcGxldGUoc3RydWN0IHVyYiAqdXJiKQ0KQEAgLTIx
NSwxMiArMjI4LDEzIEBAIHN0YXRpYyB2b2lkIHZudF9zdWJtaXRfcnhfdXJiX2NvbXBsZXRlKHN0
cnVjdCB1cmIgKnVyYikNCiANCiBpbnQgdm50X3N1Ym1pdF9yeF91cmIoc3RydWN0IHZudF9wcml2
YXRlICpwcml2LCBzdHJ1Y3Qgdm50X3JjYiAqcmNiKQ0KIHsNCi0JaW50IHN0YXR1cyA9IDA7DQor
CWludCByZXQgPSAwOw0KIAlzdHJ1Y3QgdXJiICp1cmIgPSByY2ItPnVyYjsNCiANCiAJaWYgKCFy
Y2ItPnNrYikgew0KIAkJZGV2X2RiZygmcHJpdi0+dXNiLT5kZXYsICJyY2ItPnNrYiBpcyBudWxs
XG4iKTsNCi0JCXJldHVybiBzdGF0dXM7DQorCQlyZXQgPSAtRUlOVkFMOw0KKwkJZ290byBlbmQ7
DQogCX0NCiANCiAJdXNiX2ZpbGxfYnVsa191cmIodXJiLA0KQEAgLTIzMSwxNSArMjQ1LDE2IEBA
IGludCB2bnRfc3VibWl0X3J4X3VyYihzdHJ1Y3Qgdm50X3ByaXZhdGUgKnByaXYsIHN0cnVjdCB2
bnRfcmNiICpyY2IpDQogCQkJICB2bnRfc3VibWl0X3J4X3VyYl9jb21wbGV0ZSwNCiAJCQkgIHJj
Yik7DQogDQotCXN0YXR1cyA9IHVzYl9zdWJtaXRfdXJiKHVyYiwgR0ZQX0FUT01JQyk7DQotCWlm
IChzdGF0dXMpIHsNCi0JCWRldl9kYmcoJnByaXYtPnVzYi0+ZGV2LCAiU3VibWl0IFJ4IFVSQiBm
YWlsZWQgJWRcbiIsIHN0YXR1cyk7DQotCQlyZXR1cm4gU1RBVFVTX0ZBSUxVUkU7DQorCXJldCA9
IHVzYl9zdWJtaXRfdXJiKHVyYiwgR0ZQX0FUT01JQyk7DQorCWlmIChyZXQpIHsNCisJCWRldl9k
YmcoJnByaXYtPnVzYi0+ZGV2LCAiU3VibWl0IFJ4IFVSQiBmYWlsZWQgJWRcbiIsIHJldCk7DQor
CQlnb3RvIGVuZDsNCiAJfQ0KIA0KIAlyY2ItPmluX3VzZSA9IHRydWU7DQogDQotCXJldHVybiBz
dGF0dXM7DQorZW5kOg0KKwlyZXR1cm4gcmV0Ow0KIH0NCiANCiBzdGF0aWMgdm9pZCB2bnRfdHhf
Y29udGV4dF9jb21wbGV0ZShzdHJ1Y3QgdXJiICp1cmIpDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9z
dGFnaW5nL3Z0NjY1Ni91c2JwaXBlLmggYi9kcml2ZXJzL3N0YWdpbmcvdnQ2NjU2L3VzYnBpcGUu
aA0KaW5kZXggMjkxMGNhNTQ4ODZlLi45NTE0N2VjN2I5NmEgMTAwNjQ0DQotLS0gYS9kcml2ZXJz
L3N0YWdpbmcvdnQ2NjU2L3VzYnBpcGUuaA0KKysrIGIvZHJpdmVycy9zdGFnaW5nL3Z0NjY1Ni91
c2JwaXBlLmgNCkBAIC0yMyw4ICsyMyw4IEBAIGludCB2bnRfY29udHJvbF9vdXQoc3RydWN0IHZu
dF9wcml2YXRlICpwcml2LCB1OCByZXF1ZXN0LCB1MTYgdmFsdWUsDQogaW50IHZudF9jb250cm9s
X2luKHN0cnVjdCB2bnRfcHJpdmF0ZSAqcHJpdiwgdTggcmVxdWVzdCwgdTE2IHZhbHVlLA0KIAkJ
ICAgdTE2IGluZGV4LCB1MTYgbGVuZ3RoLCAgdTggKmJ1ZmZlcik7DQogDQotdm9pZCB2bnRfY29u
dHJvbF9vdXRfdTgoc3RydWN0IHZudF9wcml2YXRlICpwcml2LCB1OCByZWcsIHU4IHJlZl9vZmYs
IHU4IGRhdGEpOw0KLXZvaWQgdm50X2NvbnRyb2xfaW5fdTgoc3RydWN0IHZudF9wcml2YXRlICpw
cml2LCB1OCByZWcsIHU4IHJlZ19vZmYsIHU4ICpkYXRhKTsNCitpbnQgdm50X2NvbnRyb2xfb3V0
X3U4KHN0cnVjdCB2bnRfcHJpdmF0ZSAqcHJpdiwgdTggcmVnLCB1OCByZWZfb2ZmLCB1OCBkYXRh
KTsNCitpbnQgdm50X2NvbnRyb2xfaW5fdTgoc3RydWN0IHZudF9wcml2YXRlICpwcml2LCB1OCBy
ZWcsIHU4IHJlZ19vZmYsIHU4ICpkYXRhKTsNCiANCiBpbnQgdm50X3N0YXJ0X2ludGVycnVwdF91
cmIoc3RydWN0IHZudF9wcml2YXRlICpwcml2KTsNCiBpbnQgdm50X3N1Ym1pdF9yeF91cmIoc3Ry
dWN0IHZudF9wcml2YXRlICpwcml2LCBzdHJ1Y3Qgdm50X3JjYiAqcmNiKTsNCi0tIA0KMi4xNy4x
DQoNCg==
